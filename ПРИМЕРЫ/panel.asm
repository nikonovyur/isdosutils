; 23.12.93  22:27; 23.12.93   0:26; panel.as (same.as);        PAN.com;=146DEBUG	EQU	0; PANEL TRICKS;CSR:;0,1 - 1st PRINTswp1	EQU	2way	EQU	3 ; - COMSTR;4,5 - 2nd PRINTswp2	EQU	6g_blk	EQU	#13stchn	EQU	#16p_stat	EQU	#36comstr	EQU	#42opcat	EQU	#43g_com	EQU	#45a_d	EQU	#7Dg_curs	EQU	#8Ashsubr	EQU	#8E	ORG	24000	IF	DEBUG	IM	1	JP	32000	END	LD	C,opcat	RST	16	RET	NZ	OR	A	RET	Z	EXX	INC	HL	LD	BC,#A00+a_d	XOR	A	RST	16	RET	C	EXX	LD	A,L	LD	IX,CSR	LD	(IX),A	LD	C,g_curs	RST	16	EXX	LD	A,"p"	SUB	B	LD	(SUBR_A+1),A	BIT	way,(IX)	JR	Z,SWAP_1	LD	DE,-45	ADD	HL,DE	LD	A,(HL)	LD	C,stchn	RST	16	RET	C	EXX	LD	DE,PATH	PUSH	DE	LDIR	POP	HLSWAP_1SUBR_A	LD	A,0	BIT	swp1,(IX)	LD	C,shsubr	CALL	NZ,16	RET	C	BIT	way,(IX)	JR	Z,PRT_1	LD	C,g_blk	RST	16	ADD	A,"A"	LD	(HL),A	LD	C,comstr	RST	16	RET	CPRT_1	LD	A,(IX)	AND	3	JR	Z,SWAP_2	CALL	P_CODE	RST	16	RET	CSWAP_2	BIT	swp2,(IX)	JR	Z,PRT_2	LD	A,"o"+"p"	LD	HL,SUBR_A+1	SUB	(HL)	LD	C,shsubr	RST	16	RET	CPRT_2	LD	A,(IX)	AND	#30	JR	Z,EXIT	RRA	RRA	RRA	RRA	CALL	P_CODE	RST	16	RET	CEXIT	IF	0	LD	C,g_com	RST	16	EXX	PUSH	DE	POP	IX	XOR	A	LD	C,p_stat	RST	16	END	LD	C,opcat	RST	16	XOR	A	RET;----------------------P_CODE	LD	C,shsubr	LD	B,A	LD	A,#F8	DEC	B	RET	Z	LD	A,#F0	DEC	B	RET	Z	INC	A	RET;-----------------------	IF	DEBUG$RST	PUSH	BC	PUSH	DE	PUSH	HL	PUSH	AF	LD	A,4	CALL	#1601	POP	AF	POP	HL	POP	DE	POP	BC	IM	2	EI	RST	#10	IM	1	RET	END;**;**CSR	EQU	$PATH	EQU	CSR+1
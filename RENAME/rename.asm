       ORG  #61A8L1     EQU  #1L3	EQU	#3L4	EQU	#4L7	EQU	#7L8	EQU	#8LB	EQU	#BLC	EQU	#CL12	EQU	#12L14	EQU	#14L20	EQU	#20L21	EQU	#21LA7C	EQU	#A7CLA7D	EQU	#A7DLB00	EQU	#B00L416E	EQU	#416EL6170	EQU	#6170L6177	EQU	#6177L6178	EQU	#6178L6183	EQU	#6183L6184	EQU	#6184L6186	EQU	#6186L6189	EQU	#6189L618B	EQU	#618BL618C	EQU	#618CL618D	EQU	#618DL618E	EQU	#618EL6190	EQU	#6190L6192	EQU	#6192L6194	EQU	#6194L6196	EQU	#6196L6198	EQU	#6198L619C	EQU	#619C	JR   L61B6       DEFM "UnCo"       DEFB #06L61AF	DEFB	#06	DEFB	#01L61B1	DEFB	#28	DEFB	#02MNWCO  DEFB %00111000EDLCO  DEFB %00101000L61B3	DEFB	#41L61B4	DEFB	#0AL61B5	DEFB	#08L61B6	LD   (L628B),SP	CALL L67E6	LD   C,#43	RST  #10       RET  C	JR   NZ,L6209       EXX	LD   C,#34	RST  #10	RET  C       EXX	DEC  HL	LD   A,(HL)	LD   (L61E7),A	LD   C,#43	RST  #10	RET  C	JR   NZ,L6209       EXX	LD   C,#50	RST  #10	RET  C	LD   C,#34	RST  #10	JR   C,L61E2	LD   A,#52       SCF       RETL61E2	CP   #51       SCF	RET  NZ	LD   A,#0L61E7	EQU	$-#1	LD   C,#26	RST  #10	RET  C	PUSH HL       EXX	POP  DE	EX   DE,HL	LD   BC,LB       LDIR	LD   C,#28	RST  #10	RET  C	LD   C,#2	RST  #10	RET  C	CALL L67E2	RET  C	LD   C,#43	RST  #10	RET  C	XOR  A	LD   A,#F4       RET; Интерактивный режимL6209  LD   C,#72         ; HL'-вектор экрана	RST  #10       EXX	LD   BC,L12       ADD  HL,BC         ; HL-регистр состояния строкового редактора       LD   A,(HL)       LD   (SMCSR),A     ; запоминаем регистр состояния строкового редактора       LD   (SCSPT),HL    ; запоминаем адрес регистра       RES  1,(HL)        ; включаем режим замены	LD   HL,L61AF	LD   DE,L6170	LD   BC,L7       LDIR       CALL L664F         ; получаем координаты в панели, открываем файл и получаем в HL системный описатель файла	RET  C       LD   A,E           ; E-номер файла	AND  A       JP   Z,L62CA       ; если файл номер 0 - выходим	LD   (L6177),A	LD   DE,L6178	LD   BC,L20       LDIR               ; копируем дескриптор	LD   BC,LFFEB	ADD  HL,BC       BIT  5,(HL)        ; проверяем бит каталога       JR   Z,L6271       ; переходим, если файл	LD   BC,L8	ADD  HL,BC	LD   E,(HL)	INC  HL       LD   D,(HL)        ; DE-номер 0-го блока каталога	LD   C,#21       RST  #10           ; открываем каталог по номеру в DE	RET  C	XOR  A	LD   C,#26       RST  #10           ; открываем 0-й файл в каталоге	RET  C       EXX	LD   DE,L6178	LD   BC,L20       LDIR       CALL L67E2         ; восстанавливаем среду	RET  C	LD   A,#6	LD   (L6673),A       LD   A,#9	LD   (L6330),A	XOR  A	LD   (L668A),A	LD   HL,L668D	LD   B,#3L6269	LD   (HL),A	INC  HL	DJNZ L6269	DEC  A	LD   (L63D1),AL6271	LD   DE,0L6272	EQU	$-#2;       LD   (L6386),DE	LD   HL,0L6279	EQU	$-#2;       LD   (L6324),HL       LD   IX,MNWIN       LD   A,(MNWCO)    ; В вектор окна помещаем цвет окна из дескриптора UnCo       LD   (IX+#4),A       LD   A,#01       LD   C,#61        ; Рисуем окно       RST  #10       LD   C,#66       RST  #10; Подсвечиваем строку ввода       LD   D,(IX+#00)       LD   E,(IX+#03)       LD   (IX+#00),2       LD   (IX+#03),27       LD   A,3       LD   HL,EDLCO       LD   B,(HL)       LD   C,#64       RST  #10       LD   (IX+#03),E       LD   (IX+#00),D       LD   (L6324),IX       LD   DE, #0302       LD   (L6386),DE       CALL L631F         ; редактируем и проверяем на корректность новое имя файла       RET  C	DEC  A       JR   NZ,MNCHK                          ; выход по SS+A       PUSH AF       CALL NWPRT       POP  AF       JR   L62CAMNCHK       CP   #FD       JP   Z,L638F       ; переход на ветку запуска менюL628A  LD   SP,0L628B	EQU	$-#2       CALL YWPRT       LD   C,#35       RST  #10           ; получаем в HL' адрес системного описателя файла       EXX	DEC  HL	LD   DE,L6177	EX   DE,HL	LD   BC,L21       LDIR               ; копируем в системный описатель - описатель с изменениямиL629B	LD   C,#28       RST  #10           ; сохраняем изменённый описатель файла	RET  C	LD   HL,(L6279)	LD   DE,L14       ADD  HL,DE         ; HL-имя + CSR файла под курсором	LD   DE,L6178	EX   DE,HL	LD   BC,LB       LDIR	LD   A,(L6183)       CPL       AND  #20           ; 0-каталог, 20-файл	LD   HL,L62CEL62B8  LD   (HL),A       CALL Z,L62DD       ; подпрограмма вносит изменения в 0-й элемент каталога (себя)	RET  C       CALL L67D1         ; если делались изменения в дескрипторе файла, вычисляем контрольную сумму	RET  C	LD   C,#2       RST  #10           ; сбрасываем кэш, далее на выход	RET  C       LD   A,#F2	LD   (L62D3),AL62CA       LD   C,#8	RST  #10       LD   A,#0L62CE	EQU	$-#1	OR   A	LD   A,#0L62D3	EQU	$-#1       XOR  A       LD   A,#F2       RETL62DD  LD   HL,L6178     ; если каталог, переходим сюда	LD   C,#25       RST  #10          ; открыть файл (каталог) по имени в HL	RET  C	XOR  A       LD   C,#26        ; открыть 0-й файл (себя)	RST  #10	RET  C       EXX	LD   DE,L6178	LD   BC,LC	EX   DE,HL       LDIR              ; копируем новое имя	LD   B,#5L62F5	INC  HL	INC  DE       DJNZ L62F5        ; пропускаем 5 байтов       LDI       LDI               ; копируем два байта номер 0-го блока (описателя сегментов)       LD   C,#28       RST  #10          ; сохраняем в текущем каталоге изменённый описатель	RET  C	LD   C,#33	RST  #10       EXX               ; BC'-номер 0-го блока верхнего уровня	LD   E,C	LD   D,B       LD   C,#21        ; возвращаемся в каталог выше	RST  #10       RET; из дескриптора в буфер копируем имя и расширение с пробелом между нимиL630B       LD   HL,L66A7       PUSH HL       LD   DE,L66A7+1       LD   (HL)," "       LD   BC,#000C       LDIR       POP  DE       LD   HL,L6178       LD   C,#4F       RST  #10       EXX       LD   A," "       LD   (DE),A       EXX       RETL631F	CALL L630BL6322	LD   IX,0L6324	EQU	$-#2	LD   HL,(L6386)	LD   C,#6B       RST  #10           ; получаем абсолютные координаты на экране       LD   HL,(SCSPT)       SET  1,(HL)	LD   HL,L66A7	LD   A,#CL6330	EQU	$-#1	LD   DE,LB00       LD   BC,#816E       RST  #10           ; строковый редактор с редактированием имени файла       PUSH HL       PUSH AF       LD   HL,(SCSPT)       LD   A,(SMCSR)       LD   (HL),A       POP  AF       POP  HL	RET  C       JR   NZ,L6373      ; выход по одной из 5 специальных клавиш       AND  A             ; проверяем длину строки       JR   Z,L631F       ; если 0, заход на редактирование заново	XOR  AL633F  LD   (L6380),A     ; 0-выход по Enter, 1-выход по SS+A, FE-выход по спец. клавише -> запуск меню       LD   DE,L619C       LD   C,#46       RST  #10       JR   C,L631F       LD   HL,L619C	LD   A,(L6183)	LD   C,#50       RST  #10           ; проверка изменённого имени файла на корректность	JR   C,L631F       LD   BC,#000B	LD   DE,L6178	PUSH DE       LDIR	POP  HL	LD   C,#34       RST  #10           ; проверяем существует ли файл с новым именем	JR   C,L637B       EXX	DEC  HL	LD   A,(L6177)	CP   (HL)       JR   Z,L637F       ; переход, если имя файла не менялось       JR   L6322         ; имя файла изменили, но такой файл уже естьL6373	CP   #10       JR   Z,L6383       ; переход, если нажали SS+A	LD   A,#FE       JR   L633F         ; в этой ветке надо вывести менюL637B	CP   #51       SCF	RET  NZL637F	LD   A,#0L6380	EQU	$-#1	JR   L6385L6383  LD   A,#1          ; A=1, нажато SS+AL6385	LD   DE,0L6386	EQU	$-#2	AND  A	PUSH AF	LD   C,#8	RST  #10	POP  AF       RETL638F       CALL UWPRT       LD   IX,L667C	LD   HL,(L61AF)	LD   (L6680),HL	LD   HL,(L61B1)	LD   (IX-#A),L	LD   (IX-#C),H	LD   A,#F2	LD   (L62D3),A	XOR  A	LD   (L62B8),A	LD   A,#2	LD   C,#61	RST  #10	LD   C,#91	RST  #10	JP   L62CAL63B6  DEFB #73       DEFW #0001       DEFB #68       DEFW L6539       DEFB #6E       DEFW #0003       DEFB #76       DEFW #0005       DEFB #70       DEFW #0006       DEFB #64       DEFW #0010       DEFB #65       DEFW #0011       DEFB #20       DEFW #0011       DEFB #11       DEFW L63FAL63D1  DEFB #6C       DEFW #0007	DEFB	#FFL63D5  DEFW L628A       DEFW L6539       DEFW L654A       DEFW L6B09       DEFW L6566       DEFW L655E       DEFW L6589       DEFW L6586       DEFW L6586       DEFW L6570       DEFW L658E       DEFW L6593       DEFW L6598       DEFW L659D       DEFW L65A2       DEFW L6611       DEFW L63F7L63F7	OR   #FF       RETL63FA  LD   HL,L61B3	LD   A,(HL)	XOR  #20	LD   (HL),A       RETL6402  LD   A,(L61B3)	AND  #20	LD   HL,L6C43	JR   NZ,L640F	LD   HL,L764FL640F	LD   (L669E),HL	CALL L6423	CALL L630B	CALL L64B2	CALL L64BB	CALL L6529	XOR  A       RETL6423	LD   HL,L6785	LD   A,(L61B4)	CP   #A	JR   Z,L6430	LD   HL,L6788L6430	LD   DE,L669A	LD   BC,L3       LDIR	LD   A,(L6183)	LD   HL,L67BF       RLA	JR   C,L6444	LD   HL,L67C8L6444	LD   C,#9	LD   DE,L66CC       LDIR	LD   HL,L679D       RLA	JR   C,L6454	LD   HL,L67A7L6454	LD   C,#A	LD   DE,L66B9       LDIR       RLA	JR   NC,L6476	LD   HL,L678B	LD   C,#4	LD   DE,L66B3       LDIR	LD   DE,L6709	LD   C,#7       LDIR	LD   DE,L671A	LD   C,#7       LDIRL6476	LD   HL,L67B1       RLA	JR   C,L647F	LD   HL,L67B8L647F	LD   C,#7	LD   DE,L66C4       LDIR	LD   DE,(L6184)	LD   HL,L66E1	CALL L650C	LD   HL,L6186	LD   DE,L6198	PUSH DE	LD   BC,L4       LDIR	XOR  A	DEC  DE	LD   (DE),A	LD   A,(L6183)	BIT  5,A	JR   Z,L64A9	DEC  DE	XOR  A	LD   (DE),AL64A9	POP  DE	LD   A,#7       SCF	LD   HL,L66F0	JR   L650FL64B2	LD   DE,(L6189)	LD   HL,L6703	JR   L650CL64BB	LD   DE,(L618B)	LD   A,(L6183)	BIT  5,A	LD   HL,L6714	JR   NZ,L64DA	INC  HL	INC  HL	CALL L6523	LD   DE,(L618C)	LD   HL,L6725	CALL L650C	JR   L64E7L64DA	CALL L650C	LD   DE,(L618D)	LD   HL,L6727	CALL L6523L64E7	LD   DE,(L618E)	LD   HL,L6736	CALL L650C	LD   DE,(L6190)	LD   HL,L6747	CALL L650C	LD   DE,(L6192)	LD   HL,L6758	CALL L650C	LD   DE,(L6194)	LD   HL,L6769L650C	LD   A,#5	OR   AL650F	PUSH AF	LD   A,(L61B4)	CP   #A	JR   Z,L651D	LD   (HL),#20	INC  HL	POP  BC	DEC  B	PUSH BCL651D	LD   B,A	POP  AF	LD   C,#7C	RST  #10       RETL6523	XOR  A	LD   D,A	LD   A,#3	JR   L650FL6529	LD   HL,L6776	LD   DE,(L6196)	LD   A,(L61B5)	LD   (L699F),A	JP   L69ADL6539  LD   A,(L61B4)	LD   B,#10	CP   B	JR   NZ,L6543	LD   B,#AL6543	LD   A,B	LD   (L61B4),A	XOR  A	INC  A       RETL654A  LD   D,(IX-#9)       LD   E,#4	LD   (L6386),DE	LD   (L6324),IX	CALL L631F	RET  C	XOR  A	INC  A       RETL655E  LD   A,#80	JR   L6568	LD   A,#40	JR   L6568L6566  LD   A,#10L6568	LD   HL,L6183	XOR  (HL)	LD   (HL),A	XOR  A	INC  A       RETL6570  LD   A,(L618B)	LD   L,A	LD   A,#3	LD   E,#D	LD   H,#0	CALL L65BF	RET  C	JR   NZ,L6586       EXX	LD   A,L	LD   (L618B),A       EXXL6586	XOR  A	INC  A       RETL6589  LD   HL,L6184	JR   L65A5L658E  LD   HL,L618C	JR   L65A5L6593  LD   HL,L618E	JR   L65A5L6598  LD   HL,L6190	JR   L65A5L659D  LD   HL,L6192	JR   L65A5L65A2  LD   HL,L6194L65A5	PUSH HL	LD   C,(HL)	INC  HL	LD   H,(HL)	LD   L,C	LD   A,#5	LD   E,#B	CALL L65BF	POP  HL	RET  C	JR   NZ,L6586       EXX	PUSH HL       EXX	POP  BC	LD   (HL),C	INC  HL	LD   (HL),B	XOR  A	INC  A       RETL65BF	LD   (L65D6),A	LD   (L65DB),HL	LD   A,(L61B4)	CP   #A	JR   Z,L65D1	INC  E	LD   HL,L65D6	DEC  (HL)L65D1	LD   (L65D8),DEL65D5	LD   A,#0L65D6	EQU	$-#1	LD   HL,0L65D8	EQU	$-#2	LD   DE,0L65DB	EQU	$-#2	PUSH AF	LD   H,(IX-#9)	LD   C,#6B	RST  #10	LD   HL,L660B	LD   A,(L61B4)	LD   B,A	POP  AF	AND  A	PUSH AF	LD   C,#7C	RST  #10	LD   A,(L61B3)	LD   B,A	POP  AF	LD   C,#6E	LD   DE,L1	RST  #10	RET  C	RET  NZ	LD   A,(L61B4)	LD   B,A	LD   C,#7D	LD   A,(L65D6)	RST  #10	RET  NC	JR   L65D5L660B       DEFB #20       DEFB #20       DEFB #20       DEFB #20       DEFB #20       DEFB #0DL6611  LD   D,(IX-#9)	LD   E,#7	LD   (L6386),DE	LD   (L6324),IXL661E	CALL L6529	LD   HL,(L6386)	LD   IX,(L6324)	LD   C,#6B	RST  #10	LD   HL,L6776L662D	EQU	$-#1	LD   A,#9L662F	EQU	$-#1	LD   DE,LB00	LD   BC,L416E	RST  #10	RET  C	JR   NZ,L664C	AND  A	JR   Z,L661E	CALL L6887	JR   C,L661E	LD   (L6196),DE	LD   A,(L699F)	LD   (L61B5),AL664C	XOR  A	INC  A       RETL664F  LD   C,#8A        ; Получаем параметры панельного курсора	RST  #10       EXX       DJNZ L665E        ; B=0 - левая панель	XOR  A	LD   (L667C),A	LD   A,#2	LD   (L6682),AL665E  LD   (L6279),HL   ; Адрес вектора окна панели	LD   L,#0       LD   H,D          ; D-позиция Y в окне	LD   (L6272),HL       LD   C,#27        ; Открываем файл по номеру в E	RST  #10	RET  C       EXX	PUSH HL       EXX       POP  HL           ; Возвращаем в HL адрес системного описателя открытого файла       RET       DEFB #00          ; цвет курсора при отработке Enter       DEFB #00          ; управляющий регистр меню       DEFB #00          ; цвет курсораL6673  DEFB #07          ; позиция курсора       DEFW L6402        ; подпрограмма инициализации символьного массива       DEFW #0000        ; подрограма пользователя, выполняющаяся при нажатии любой клавиши       DEFW L63B6        ; адрес списка "горячих клавиш"       DEFW L63D5        ; адрес списка функций отработки клавиши Enter; wt окно менюL667C  DEFB #10	DEFB	#04	DEFB	#13	DEFB	#0FL6680	DEFB	#0F	DEFB	#01L6682	DEFB	#17	DEFB	#11; Буфер CSR строк: 0-проскакивать строку, 1-останавливаться на ней       DEFB #01	DEFB	#00	DEFB	#01	DEFB	#01	DEFB	#01	DEFB	#01L668A	DEFB	#01	DEFB	#00	DEFB	#00L668D	DEFB	#01	DEFB	#01	DEFB	#01	DEFB	#01	DEFB	#01	DEFB	#01	DEFB	#01	DEFB	#01       DEFM "Save"	DEFB	#0DL669A       DEFM "Dec "L669E       DEFM "Ovr"	DEFB	#0D       DEFM "Имя:"L66A7       DEFM "12345678.123 "L66B3       DEFM "File  "L66B9       DEFM "Contiguous "L66C4       DEFM "Visible"	DEFB	#0DL66CC       DEFM "Unprotect"       DEFB #0D       DEFM "Address:   "L66E1       DEFM "      Length:  "L66F0       DEFM "        Fil_pos:   "L6703       DEFM "      "L6709       DEFM "Special:   "L6714       DEFM "      "L671A       DEFM "Word_20:   "L6725       DEFM "  "L6727       DEFM "    Word_22:   "L6736       DEFM "      Word_24:   "L6747       DEFM "      Checksum:  "L6758       DEFM "      Word_28:   "L6769       DEFM "      Date:  "L6776       DEFM "          Exit"	DEFB	#03L6785       DEFM "Dec"L6788       DEFM "Hex"L678B       DEFM "Cat Cat_posByte_21"L679D       DEFM "Contiguous"L67A7       DEFM " Segmented"L67B1       DEFM "Hidden "L67B8       DEFM "Visible"L67BF       DEFM "Protected"L67C8       DEFM "Unprotect"L67D1	LD   HL,L61AF	LD   DE,L6170	LD   B,#7L67D9	LD   A,(DE)	CP   (HL)	JR   NZ,L67EF	INC  HL	INC  DE	DJNZ L67D9       RETL67E2	LD   C,#37	JR   L67E8L67E6	LD   C,#36L67E8	LD   IX,L6832	XOR  A	RST  #10       RETL67EF	CALL L67E6	LD   C,#45	RST  #10       EXX	LD   BC,LFFF7	ADD  HL,BC	PUSH HL	POP  IX	XOR  A	LD   C,#37	RST  #10	RET  C	LD   IX,L61AF	LD   DE,L7	XOR  A	LD   HL,L7	LD   C,#2A	RST  #10	RET  C	LD   HL,L6836	LD   C,#48	RST  #10	JR   NC,L681D	CP   #25       SCF	RET  NZL681D	LD   C,#2	RST  #10	RET  C	CALL L67E2	RET  C	LD   C,#45	RST  #10       EXX	LD   HL,L6832	LD   BC,L4       LDIR       RETL6832	DEFB	#00	DEFB	#00	DEFB	#00	DEFB	#00L6836       DEFM "@calc"	DEFB	#0DL683C	POP  IX       RETL683F	LD   A,(HL)	AND  #CF	JR   NZ,L6848	RES  4,(IX+#0)L6848	INC  HL	LD   A,(HL)	CP   #30	DEC  HL	LD   A,#2	JR   NC,L6856	DEC  A	SET  4,(IX+#0)L6856	PUSH AF	LD   BC,LA7D	RST  #10	PUSH HL       EXX	EX   DE,HL	POP  HL	POP  BCL6860	INC  HL	DJNZ L6860       RETL6864	CP   #2E	JR   NZ,L6881	SET  2,(IX+#0)	INC  HL	CALL L683F	RET  C	LD   A,E	AND  A	JP   Z,L6918	CP   #D	JP   NC,L6918	LD   (L699D),A	LD   A,(HL)	CP   #2EL6881	JP   NZ,L6918	JP   L6923L6887	PUSH IX	LD   BC,L683C	PUSH BC	LD   IX,L699FL6891	LD   A,(HL)	INC  HL	CP   #20	JR   Z,L6891	DEC  HL	CALL L683F	RET  C	RES  4,(IX+#0)	LD   A,E	CP   #20	JR   NC,L6918	AND  A	JR   Z,L6918	LD   (L699C),A	LD   A,(HL)	CP   #2D	JR   NZ,L6864	RES  3,(IX+#0)	INC  HL	PUSH HL	BIT  5,(HL)	JR   NZ,L68C7	LD   B,#2L68BC	INC  HL	BIT  5,(HL)	JR   Z,L68C7	DJNZ L68BC	SET  3,(IX+#0)L68C7	POP  HL	RES  2,(IX+#0)	LD   B,#C	EX   DE,HLL68CF	PUSH BC	PUSH DE	LD   HL,L6A57	RES  1,(IX+#0)	LD   A,(DE)       RLCA	JR   NC,L68E3	LD   HL,L6A7B	SET  1,(IX+#0)L68E3	LD   A,B       ADD  A,B       ADD  A,B	LD   C,A	LD   B,#0	ADD  HL,BC	LD   B,#3L68EC	SET  0,(IX+#0)	LD   A,(DE)	BIT  5,A	JR   Z,L6907	RES  0,(IX+#0)	RES  5,A	BIT  7,A	JR   Z,L6907	BIT  6,A	JR   Z,L6907	RES  6,A	SET  4,AL6907	CP   (HL)	JR   NZ,L6914	INC  HL	INC  DE	DJNZ L68EC	POP  BC	POP  BC	LD   A,B	EX   DE,HL	JR   L691BL6914	POP  DE	POP  BC	DJNZ L68CFL6918	JP   L6998L691B	LD   (L699D),A	LD   A,(HL)	CP   #2D	JR   NZ,L6998L6923	INC  HL	CALL L683F	RET  C	LD   A,E	SUB  #50	JR   NC,L692F	ADD  A,#64L692F	LD   D,A	LD   A,(L699D)       RLCA       RLCA       RLCA       RLCA       RLCA	RL   D	AND  #E0	LD   HL,L699C	OR   (HL)	LD   E,AL6941	LD   A,E	AND  #1F	LD   (L699C),A	JR   Z,L6998	LD   A,E	AND  #E0	LD   C,A	LD   A,D	AND  #1	OR   C       RLCA       RLCA       RLCA	AND  A	JR   Z,L6998	CP   #D	JR   NC,L6998	LD   (L699D),A	LD   A,D	AND  #FE       RRCA	ADD  A,#50L6964	SUB  #64	JR   NC,L6964	ADD  A,#64	LD   (L699E),A	LD   A,(L699D)	CP   #2	JR   Z,L6986	LD   C,A	LD   B,#0	PUSH HL	LD   HL,L6A4D	ADD  HL,BC	LD   A,(L699C)	CP   (HL)	POP  HL	RET  Z	JR   NC,L6998L6984	XOR  A       RETL6986	LD   A,(L699C)	CP   #1D	JR   C,L6984	JR   NZ,L6998	LD   A,(L699E)	AND  A	JR   Z,L6998	AND  #3	RET  ZL6998	LD   A,#1D       SCF       RETL699C	DEFB	#00L699D	DEFB	#00L699E	DEFB	#00L699F	DEFB	#00L69A0	LD   (HL),#2E	INC  HL	CALL L6A26	POP  DE	RET  C	LD   (HL),#2E	JP   L6A22L69AD	CALL L6941	RET  C	PUSH IX	LD   IX,L699F	LD   BC,L683C	PUSH BC	LD   A,E	AND  #1F	LD   E,L	LD   D,H	INC  DE	LD   (HL),#20	LD   BC,L8	PUSH HL       LDIR	POP  HL	CALL L6A32	RET  C	LD   A,(L699D)	BIT  2,(IX+#0)	PUSH DE	JR   NZ,L69A0	LD   (HL),#2D	INC  HL	EX   DE,HL	LD   HL,L6A57	BIT  1,(IX+#0)	JR   Z,L69E8	LD   HL,L6A7BL69E8	LD   C,A       ADD  A,C       ADD  A,C	LD   C,A	LD   B,#0	ADD  HL,BC	LD   B,#3L69F1	BIT  3,(IX+#0)	JR   Z,L6A04	RES  0,(IX+#0)	LD   A,B	CP   #3	JR   NZ,L6A04	SET  0,(IX+#0)L6A04	LD   A,(HL)	BIT  0,(IX+#0)	JR   NZ,L6A19	SET  5,A	BIT  7,A	JR   Z,L6A19	BIT  4,A	JR   Z,L6A19	RES  4,A	SET  6,AL6A19	LD   (DE),A	INC  HL	INC  DE	DJNZ L69F1	EX   DE,HL	POP  DE	LD   (HL),#2DL6A22	INC  HL	LD   A,(L699E)L6A26	CALL L6A32	RET  C	LD   A,(DE)	CP   #20	RET  NZ	LD   A,#30	LD   (DE),A       RETL6A32	LD   BC,LA7C	LD   E,A	LD   D,#0	CP   B	LD   A,#2	JR   NC,L6A44	BIT  4,(IX+#0)	JR   Z,L6A44	DEC  AL6A44	AND  A	PUSH AF	RST  #10	LD   E,L	LD   D,H	POP  BCL6A4A	INC  HL	DJNZ L6A4AL6A4D  RET       DEFB 31, 28, 31, 30, 31, 30, 31, 31, 30L6A57       DEFB 31, 30, 31       DEFM "JANFEBMARAPRMAYJUNJULAUGSEPOCTNOV"L6A7B       DEFM "DEC"       DEFM "ЯНВФЕВМАРАПРМАЙИЮНИЮЛАВГСЕНОКТНОЯДЕК"L6AA2	LD   C,#6	ADD  HL,BC	LD   E,(HL)	INC  HL	LD   D,(HL)	LD   C,#6	RST  #10	RET  C       EXX	LD   A,(HL)	INC  HL	LD   E,(HL)	INC  HL	LD   D,(HL)	LD   (L6AF1),DE	OR   A	JR   Z,L6ADC	CP   #55	JR   C,L6AC1L6ABD	LD   A,#55       SCF       RETL6AC1	DEC  A	JR   Z,L6ADC	INC  HL	LD   C,(HL)	INC  C	DEC  C	JR   Z,L6ABD	LD   B,#0	EX   DE,HL	ADD  HL,BC	EX   DE,HL	INC  HL	LD   C,(HL)	INC  HL	LD   B,(HL)	EX   DE,HL	SBC  HL,BC	ADD  HL,BC	JR   NZ,L6B06	EX   DE,HL	JR   L6AC1L6ADC  EXX	LD   C,#3F	LD   A,#1	RST  #10	RET  C	LD   C,#35	RST  #10       EXX	LD   BC,LB	ADD  HL,BC	SET  6,(HL)	LD   C,#6	ADD  HL,BC	LD   DE,0L6AF1	EQU	$-#2	LD   (HL),E	INC  HL	LD   (HL),DL6AF6	LD   C,#35	RST  #10       EXX	LD   DE,L6178	LD   BC,L20       LDIR	CALL L629B	RET  CL6B06	XOR  A	INC  A       RETL6B09  LD   C,#35	RST  #10       EXX	LD   BC,LB	ADD  HL,BC	BIT  6,(HL)	JR   Z,L6AA2	LD   A,#1	LD   C,#38	RST  #10	RET  C	BIT  5,(HL)	INC  HL	INC  HL	INC  HL	LD   A,(HL)	INC  HL	LD   E,(HL)	INC  HL	LD   D,(HL)	JR   Z,L6B29	LD   D,#0L6B29	OR   A	JR   Z,L6B2D	INC  DEL6B2D	LD   (L6B46),DE	INC  HL	LD   E,(HL)	INC  HL	LD   D,(HL)	LD   (L6B4F),DE       EXX	PUSH BC	LD   D,B	LD   E,C	LD   C,#6	RST  #10	POP  IX	RET  C       EXX	PUSH DE	LD   BC,0L6B46	EQU	$-#2	LD   (HL),#0	PUSH HL       EXX	POP  HL       EXX	LD   DE,0L6B4F	EQU	$-#2	INC  HLL6B51	EQU	$-#1	LD   (HL),E	INC  HL	LD   (HL),D	INC  HL	LD   (HL),#FF	DEC  DE	INC  D       EXX	INC  (HL)       EXX	INC  B	DEC  B	JR   Z,L6B65	INC  BC	DEC  B	JR   L6B51L6B65	LD   (HL),C	LD   A,C	OR   A	JR   NZ,L6B6D       EXX	LD   (HL),A       EXXL6B6D	POP  DE	LD   C,#2E	RST  #10	RET  C	PUSH IX	LD   C,#35	RST  #10       EXX	POP  DE	LD   BC,LB	ADD  HL,BC	RES  6,(HL)	LD   C,#6	ADD  HL,BC	LD   (HL),E	INC  HL	LD   (HL),D	JP   L6AF6; вывод подсвета кнопок главного окнаUWPRT       PUSH HL       LD   HL,#060D       JR   YNPRTNWPRT       PUSH HL       LD   HL,#0513       JR   YNPRTYWPRT       PUSH HL       LD   HL,#0607YNPRT       LD   IX,YWIN       LD   (IX+#00),L       LD   (IX+#03),H       LD   A,1       LD   HL,EDLCO       LD   B,(HL)       POP  HL       LD   C,#63       RST  #10       RETMNWIN       DEFB 1       DEFB 7       DEFB 8       DEFB 29       DEFB %00111000       DEFB %00000001       DEFB 3       DEFB 36       DEFM "╔═════════ Переименование ═════════╗"       DEFM "║                                  ║"       DEFM "║                                  ║"       DEFM "╟──────────────────────────────────╢"       DEFM "║      [Enter] [SS/SP] [SS/A]      ║"       DEFM "╚══════════════════════════════════╝"       DEFB #03SMCSR  DEFB #00SCSPT  DEFW #0000; окна для подсветки кнопок главного окнаYWIN    DEFB 7        DEFB 11        DEFB 1        DEFB 6        DEFB %00101000        DEFB %00000001        DEFB 14        DEFB 7L6C43  EQU  #6C43L764F	EQU	#764FL816E	EQU	#816ELFFEB	EQU	#FFEBLFFF7	EQU	#FFF7
# isdosutils 

Этот проект относится к прошлому веку, когда IBM PC ещё только появлялись, про интернет что-то слышали, но почти никто его не видел, а в народе господствовали самодельные zx spectrum'ы. Именно тогда питерские мастера создали свой MS-DOS, написанный на чистом ассемблере, с RAM-диском и драйверами. По сравнению с тем, что на то время работало на z80, это было кардинально новое. Называлась чудо-система IS-DOS https://ru.wikipedia.org/wiki/IS-DOS 

![Внешний вид оболочки](https://github.com/nikonovyur/isdosutils/blob/main/SCREENSHOTS/sshot_000000.png)


Надо сказать, что поддержка этой системы была одной из самых активных. Именно под неё появилось очень много прикладных пакетов, которые нашли своё применение в местах, где 8-битные компьютеры представить трудно. Это были компьютерные классы с Бэйсиком, телетекст на кабельном телевидении, документообот разных ИП, кому были не по карману IBM PC. Под IS-DOS так же появились и средства разработки. Для любителей это были языки высокого уровня, а для реальных пацанов это только ассемблер.


В далёкие 90-е было интересно приобщиться к разработке под взрослые системы, где компиляция была со сценариями, объектным кодом и компоновкой. Но работая в оболочке IS-DOS хочется так же и удобства взрослых систем. Очень быстро обнаруживаешь, что не можешь так же просто, как в каком-нибудь Нортон Коммандере, удалить каталог с подкаталогами, или скопировать его. Казалось бы, простые функции, но из-за какой-то сложности в тех утилитах, которые этим занимаются, реализованы не были.

Прошли годы, десятилентия, сменились идеологии работы вычислительных систем, поколения операционных систем, но zx spectrum не умер. А даже и как-то развивался. И ещё есть любители, предпочитающие программирование под эти 8 бит, при том, что уже пережили 16 бит, 32 бита и уже в мире господствуют 64 битные архитектуры. А is-dos считается на этих 8 битах одной из лучших операционных систем. Пережившая несколько эволюционных рывков, она всё ещё в строю. И не относящиеся к играм и развлечениям приложения довольно удачно в ней реализовываются. 

Но приложения оболочки остались теми же, как в прошлом веке. В них выловили баги, адаптировали под новые версии системы, но неудобства прошлого века они пронесли с собой с тех 90-х. Как гласит девиз труъ-программиста - "Программа что-то не может - помоги себе сам! Напиши программу, которая может!". 

Так вот, в данном репозитории представлен исходный код утилит оболочки IS-DOS, переписанный под себя. В основном преследовались следующие цели:

- Придать утилитам оболочки работы с файлами единый стиль - был выбран стиль NC 4.0
- В копировщике и удаляторе реализовать удобные функции работы со структурами каталогов и избавиться от костылей, для этого применяющихся.
- В копировщике переработать алгоритм работы с буфером в верхней памяти, сделать алгоритм более рациональным и в результате уменьшить количество запросов чтения/записи.
- И другие мелкие багфиксы и сами-собой разумеющиеся удобства.

Теперь MKDIR выглядит вот так:

![MKDIR](https://github.com/nikonovyur/isdosutils/blob/main/SCREENSHOTS/sshot_000008.png)


Внешний вид RENAME. Теперь про вызов меню с кучей атрибутов файла вы можете узнать прямо из главного окна:

![RENAME](https://github.com/nikonovyur/isdosutils/blob/main/SCREENSHOTS/sshot_000007.png)


Удаление - теперь можно удалить целый каталог с подкаталогами и файлами

![DELETE1](https://github.com/nikonovyur/isdosutils/blob/main/SCREENSHOTS/sshot_000006.png)


DELETE за работой

![DELETE2](https://github.com/nikonovyur/isdosutils/blob/main/SCREENSHOTS/sshot_000011.png)


Копировщик файлов - теперь он выглядит вот так:

![FILECOPY1](https://github.com/nikonovyur/isdosutils/blob/main/SCREENSHOTS/sshot_000002.png)


Меню настроек копировщика:

![FILECOPY2](https://github.com/nikonovyur/isdosutils/blob/main/SCREENSHOTS/sshot_000009.png)


FILECOPY за работой - реализована мегафича - прогрессбар:

![FILECOPY3](https://github.com/nikonovyur/isdosutils/blob/main/SCREENSHOTS/sshot_000005.png)


Исходный код этих утилит находится здесь, в этом репозитории, можно брать его, пользоваться, компилировать свои программы и делать всё то, что делают с исходным кодом. Код здесь лежит в аутентичной для IS-DOS кодировке - CP866, из-за этого его здесь не удобно просматривать. Для работы с кодом рекомендуется использовать редактор, который понимает эту кодировку. Так же есть особенности самого ассемблера: для компиляции использовался оригинальный ассемблер из пакета IS-DOS Assembler 2.3 Некоторые директивы могут быть не совместимы с ассемблерами Z80, использующимися на ПК. Но, каким-нибудь sjasmplus можно собрать большинство программ. Можно и все, но уже с доработкой кода.

Однако, что бы упростить знакомство с процессом сборки, ниже приведена ссылка на образ загрузочной системной дискеты с ассемблером и исходным кодом. Просто загружаетесь с дискеты, заходите в соответствующий каталог, запускаете build.bat и получаете рабочий com-файл. Система работоспособна даже на zx spectrum 48k. Лишь бы был beta disk interface.

Образ загрузочного диска IS-DOS 5.0 Base + Assembler с исходниками:

https://disk.yandex.ru/d/j3C03OINWzXlfQ


Если нет желания заниматься с исходниками, ниже - ссылка на образ диска со сконфигурированной системой - базовый комплект IS-DOS 5.0 Base с авторской оболочкой:

https://disk.yandex.ru/d/0bWU_KKQ-NURTw



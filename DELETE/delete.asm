       ORG  #5DC0       JR   L5E1D       DEFM "UnCo"       DEFB #04MWCOL  DEFB %00111000PWCOL  DEFB %00010111AWCOL  DEFB %00100000BTCOL  DEFB %00101000L5E1D       LD   C,#45       RST  #10       EXX       LD   BC,-5       ADD  HL,BC       LD   C,(HL)       INC  HL       LD   B,(HL)       LD   (CMPTR),BC       EXX       LD   C,#43        ; Проверяем на командную строку       RST  #10       JR   NZ,INTMO     ; Переход, если интерактивный режим       OR   A       JP   Z,COMMO      ; Переход, если параметр - имя файла       LD   (KEY),A      ; Сохраняем ключ, переходим       JR   L5E1D; интерактивный режимINTMO       LD   C,#87       RST  #10       LD   (MARKED),A       EXX       LD   (MINMAX),HL       EXX       OR   A       JP   NZ,MULCH     ; переход, если отмечено несколько файлов       LD   C,#8A        ; получаем параметры панельного курсора       RST  #10       OR   A            ; A - номер файла       RET  Z            ; Выход, если курсор стоит на точках       LD   C,#26        ; открыть файл по номеру в регистре A       RST  #10          ; HL'-адрес системного 32-байтового описателя файла       RET  C       EXX       LD   (FDESCR),HL       LD   BC,#000B       PUSH HL       ADD  HL,BC       LD   (FDFST),HL   ; сохраняем адрес регистра состояния файла       BIT  5,(HL)       ; проверяем файл, или каталог       POP  HL       JP   Z,CASFL      ; файл - переход на рисование окна с файлом; ветка работы с каталогом       PUSH HL       LD   DE,GWIN       LD   HL,DWIN       LD   BC,8       LDIR       LD   DE,GWTXT       LD   HL,DWINPT       CALL GNWIN       POP  HL       LD   DE,DNAME       LD   C,#4F       RST  #10       EXX       LD   A,#20       LD   (DE),A       LD   A,14       LD   (YWIN+1),A       CALL GWPRTKEYR1       CALL KEYWT       CP   #10          ; SS+A       JP   Z,CANCL      ; отмена удаления       CP   #0D          ; Enter       JR   Z,CNFDD      ; подтверждено удаление файла       CP   "s"       JR   NZ,KEYR1       LD   HL,#0603      ; координаты печати в окне       LD   C,#6B       RST  #10       LD   A,(ASDFL)       CPL       LD   (ASDFL),A       OR   A       LD   A," "       JR   Z,ASKSD1       LD   A,"X"ASKSD1 LD   (ASKSD),A       LD   C,#0A       RST  #10       JR   KEYR1CNFDD                    ; пдтверждено удаление каталога       CALL YWPRTRECDL                    ; каталог не пуст, требуется проверка на флаг и рекурсивное удаление       LD   C,#35        ; получаем адрес дескриптора открытого каталога       RST  #10       EXXRECD11       PUSH HL       DEC  HL       LD   A,(HL)       ; получаем номер текущего каталога в каталоге уровнем выше       CALL RECD10       LD   (HL),A       ; запоминаем номер в мвссиве       POP  HL       LD   BC,#0013     ; номер 0-го ,лока каталога по смещению 19       ADD  HL,BC       LD   E,(HL)       INC  HL       LD   D,(HL)       LD   C,#21       RST  #10       RET  C       LD   A,(ASDFL)       OR   A       JR   NZ,RECD1A       LD   HL,(FDESCR)       LD   BC,54       ADD  HL,BC       LD   A,(HL)       OR   A       JR   Z,RECD1A       LD   HL,(FDESCR)       LD   BC,44       ADD  HL,BC       LD   E,(HL)       INC  HL       LD   D,(HL)       LD   C,#21       RST  #10       RET  C       JP   NEMDRRECD1A       LD   HL,CRLVL       INC  (HL)       CALL RECD10RECD1       LD   A,(HL)       LD   C,#26       RST  #10       JP   NC,RECD3       CP   #50          ; проверяем на ошибку 80 (выход за список каталога)       SCF       RET  NZ; ветка возвращения на уровень выше и удаления каталога из которого вышли       XOR  A            ; перебрали все файлы в каталоге, возвращаемся на уровень выше       LD   C,#26       RST  #10       RET  C       EXX       LD   BC,#000C       ADD  HL,BC       LD   E,(HL)       INC  HL       LD   D,(HL)       LD   C,#21       RST  #10       RET  C       LD   HL,CRLVL       PUSH HL       CALL RECD10       XOR  A       LD   (HL),A       POP  HL       LD   A,(HL)       OR   A       JP   Z,RECD4     ; если нулевой уровень, можно всё завершать и на выход       DEC  (HL)       CALL RECD10       LD   A,(HL)      ; в A номер файла (каталога) из которого только что вышли       LD   C,#26       RST  #10       RET  C       EXX       LD   (FDESCR),HL       PUSH HL       LD   BC,#000B       ADD  HL,BC       LD   (FDFST),HL       POP  HL       LD   DE,0         ; читаем блок #0000 открытого файла (каталога) в кэш       LD   C,#2D       RST  #10          ; HL' - адрес блока в кэше, DE - адрес заголовка блока       RET  C       EXX       LD   (CHDES),DE       LD   (BL0HL),HL       PUSH HL       LD   BC,#000B       ADD  HL,BC       ADD  HL,BC       LD   A,(HL)       ; читаем число файлов без каталога и удалённых       POP  HL           ; восстанавливаем HL - указывает на начало дескриптора самого себя в 0-м блоке каталога       OR   A            ; проверяем количество файлов на 0       JR   Z,RECD81     ; файлов в каталоге не 0 - переходим       SCF       LD   A,83         ; после прохода удаления файлов, какие-то остались       RET               ; вылетаем с ошибкойRECD81       ADD  HL,BC       BIT  7,(HL)       JR   Z,RECD9      ; каталог не защищён, можно удалять       CALL DPWPRRECD82       CALL KEYWT       CP   #10       JP   Z,CNCL1       CP   "y"       JR   Z,RECD83      ; нажали Y, идём снимать защиту файла       CP   "n"       JR   NZ,RECD82       CALL GWPRT       CALL YWPRT       JR   RECD91RECD83       LD   HL,(FDFST)       RES  7,(HL)       LD   HL,(BL0HL)       LD   BC,#000B       ADD  HL,BC       RES  7,(HL)       CALL GWPRT       CALL YWPRTRECD9       LD   HL,(BL0HL)       LD   BC,#000B       ADD  HL,BC       RES  0,(HL)       ; помечаем каталог в 0-м блоке, как удалённый       EXX       LD   HL,(FDFST)       RES  5,(HL)       ; сбрасываем 5-й бит в системном дескрипторе. Теперь он файл.       LD   BC,#0005       ADD  HL,BC       LD   (HL),B       ; обнуляем старший байт размера каталога (файла)       EXX       LD   DE,(CHDES)       LD   C,#2E        ; DE - адрес описателя блока в кэше - помечаем блок как модифицированный       RST  #10       RET  C       LD   C,#3C       RST  #10       RET  CRECD91       LD   A,(CRLVL)       OR   A       JP   Z,RECD4     ; вернулись на 0-й уровень       JP   RECD2       ; возвращаемся на уровень выше, переходим к следующему файлуRECD3       OR   A       JP   Z,RECD2     ; открыли файл с номером 0, это текущий каталог; здесь открыт файл и с ним можно проводить действия; HL'-адрес системного дескриптора открытого файла       EXX       LD   (FDESCR),HL       PUSH HL       LD   BC,#000B       ADD  HL,BC       LD   (FDFST),HL       LD   A,(HL)       POP  HL       BIT  0,A         ; файл не удалён?       JP   Z,RECD2     ; файл/каталог удалён, пропускаем       BIT  5,A         ; проверяем-открытый файл каталог?       JP   NZ,RECD11RECD31       LD   HL,DNME1       LD   E,L       LD   D,H       INC  DE       LD   BC,27       LD   (HL),#20       LDIR              ; чистим буфер в тексте окна       LD   HL,PTBUF       LD   E,L       LD   D,H       INC  DE       LD   BC,PTBLN-1       LD   (HL),#20       LDIR       LD   HL,#0402       LD   C,#6B       RST  #10       XOR  A       LD   HL,PTBUF       LD   DE,PTBLN       LD   C,#47       RST  #10       RET  C       LD   HL,PTBUF       LD   BC,PTBLN-13       LD   A,#20       CPIR       DEC  HL       LD   E,L       LD   D,H       CALL RECD10       LD   A,(HL)       LD   C,#26       RST  #10       RET  C       PUSH DE       EXX       LD   (FDESCR),HL       PUSH HL       LD   BC,#000B       ADD  HL,BC       LD   (FDFST),HL       POP  HL       POP  DE       LD   C,#4F       RST  #10       EXX       LD   H,D       LD   L,E       LD   B,D       LD   C,E       LD   DE,PTBUF       XOR  A       SBC  HL,DE       LD   A,27       CP   L       JR   C,RECD32    ; переход, если путь получился больше 27 символов; путь с именем влезают в окно       LD   C,L       LD   A,28       SUB  L       PUSH AF       LD   HL,PTBUF       LD   DE,DNME1       LD   B,0       LDIR       DEC  A       JR   Z,RECD36       LD   C,A       LD   H,D       LD   L,E       INC  DE       LD   (HL),#20       LDIRRECD36       LD   HL,PTBUF       LD   C,#6C       RST  #10       POP  AF       LD   B,A       LD   E,#20       LD   C,#0ARECD34       LD   A,E       RST  #10       DJNZ RECD34      ; добиваем строку с путём пробелами       JR   RECD33; длина пути с именем файла получилась больше 27 символов, урезаем слева и дополняем точкамиRECD32       LD   H,B       LD   L,C       LD   DE,24       XOR  A       SBC  HL,DE        ; HL-начало строки, откуда начинать печатать       LD   E,"."       LD   B,3       LD   C,#0ARECD35       LD   A,E       RST  #10       DJNZ RECD35       LD   C,#6C       RST  #10       LD   DE,DNME1+3       LD   BC,24       LDIR       LD   HL,DNME1       LD   D,H       LD   E,L       INC  DE       LD   BC,2       LD   (HL),"."       LDIRRECD33       CALL DLPFL       RET  CRECD2       CALL RECD10       INC  (HL)       JP   RECD1RECD4       LD   C,#02       RST  #10       RET  C       JP   EXITRECD10       LD   HL,CRLVL       LD   C,(HL)       INC  HL       LD   B,(HL)       LD   HL,FNLVL       ADD  HL,BC       RET; ветка удаления файла, на котором стоит курсорCASFL       PUSH HL       CALL GNMWIN       POP  HL       LD   DE,FNAME       LD   C,#4F       RST  #10       EXX       LD   A,#20       LD   (DE),A       LD   HL,DFLTXT   ; копируем строку "Удаление файла" в текст окна       LD   BC,DFLTLN       LD   DE,DFLMS       LDIR       CALL GWPRTKEYRP       CALL KEYWT       CP   #10          ; SS+A       JR   Z,CANCL      ; отмена удаления       CP   #0D          ; Enter       JR   Z,CNFDL      ; подтверждено удаление файла       JR   KEYRPCNFDL                    ; подтверждено удаление файла       CALL YWPRT       CALL DLPFL       JP   EXFCNEMDR                    ; каталог не пуст, выход с соответствующей оши,кой (83)       SCF       LD   A,83       RETCANCL                    ; отмена удаления SS+A       CALL NWPRT       JP   EXITMULCH                    ; отмечено несколько файлов       PUSH AF       CALL GNMWIN       POP  AF       LD   DE,FNAME       LD   HL,SELTX1       LD   BC,SELT1L       LDIR; в A количество отмеченных файлов. Нужно посчитать количество разрядов       LD   H,D       LD   L,E       LD   C,1       CP   10       JR   C,MUCWN1       INC  C       CP   100       JR   C,MUCWN1       INC  CMUCWN1       LD   B,0       ADD  HL,BC       INC  HL       PUSH HL       LD   L,E       LD   H,D       LD   D,0       LD   E,A       OR   A            ; сбрасываем флаг C       LD   A,C       LD   BC,#0A7C     ; перевод числа в ASCII строку       RST  #10       POP  DE       LD   HL,SELTX2       LD   BC,SELT2L       LDIR       LD   HL,ASKTXT       LD   BC,ATXLEN       LD   DE,ASKTXMS       LDIR       CALL GWPRTKEYR4       CALL KEYWT       CP   #10          ; SS+A       JP   Z,CANCL      ; отмена удаления       CP   #0D          ; Enter       JR   Z,MULC1      ; подтверждено удаление файлов       CP   "a"       JR   NZ,KEYR4       LD   HL,#0403      ; координаты печати в окне       LD   C,#6B       RST  #10       LD   A,(ASKFLG)       CPL       LD   (ASKFLG),A       OR   A       LD   A," "       JR   Z,ASKSD2       LD   A,"X"ASKSD2 LD   (ASKFLCH),A       LD   C,#0A       RST  #10       JR   KEYR4MULC1       LD   HL,FNAME       LD   DE,FNAME+1       LD   BC,21       LD   (HL)," "       LDIR       LD   HL,#0302       LD   C,#6B       RST  #10       LD   B,22       LD   C,#0A       LD   E," "MULC2       LD   A,E       RST  #10       DJNZ MULC2       CALL YWPRT       LD   HL,CURMRKMULC25       LD   A,(MINMAX+1)       LD   B,AMULC3       LD   E,B       LD   C,#86       RST  #10       EXX       DEC  HL       LD   A,(HL)       EXX       CP   (HL)       JR   Z,MULC4       DJNZ MULC3       JP   MULC5MULC4                    ; нашли нужный отмеченный файл. E-номер файла в каталоге       LD   A,E       LD   C,#26       RST  #10       RET  C       EXX       LD   (FDESCR),HL       PUSH HL       LD   BC,#000B       ADD  HL,BC       LD   (FDFST),HL       POP  HL       LD   DE,FNAME       LD   C,#4F       RST  #10       EXX       LD   HL,#0302       LD   C,#6B       RST  #10       LD   HL,FNAME       LD   C,#6C       RST  #10       OR   A       LD   L,E       LD   H,D       PUSH HL       LD   DE,FNAME       SBC  HL,DE       LD   A,13        ; максимальная длина имени файла с точкой и #0D в конце       SUB  L           ; в A-количество пробелов, которые надо допечатать с текущей позиции       LD   E,A       LD   D,0       PUSH DE       LD   B,A       LD   C,#0A       LD   E," "MULC6       LD   A,E       RST  #10       DJNZ MULC6       POP  BC       POP  HL       LD   D,H       LD   E,L       INC  DE       LD   (HL)," "       LDIR; работа с файлом; проверяем флаг запроса разрешения удаления       LD   A,(ASKFLG)       OR   A       JR   Z,MULC74       CALL FAWPRMULC8       CALL KEYWT       CP   #10       JP   Z,CNCL1       CP   #0D       JR   Z,MULC7       CP   "y"       JR   Z,MULC7       CP   "n"       JP   NZ,MULC8       CALL GWPRT       CALL YWPRT       JR   MULC52MULC7                     ; флаг запроса не установлен, можно удалять       CALL GWPRT       CALL YWPRTMULC74       CALL DLPFL       RET  CMULC52       LD   HL,CURMRKMULC5       INC  (HL)       LD   A,(MARKED)       CP   (HL)       JP   NC,MULC25       JP   EXFC        ; выходим со сбросом кэшаCNCL1       CALL GWPRT       CALL NWPRT       JP   EXFCCOMMO                    ; режим командной строки       EXX                         ; первая ступень проверки на маску, или каталог       LD   (FPATP),HL       LD   A,#FF       LD   B,#0BCOMM2       CP   (HL)       JR   NZ,COMM1       INC  HL       DJNZ COMM2; проверка параметра командной строки на маску; маска содержит символы *.? иначе - это каталог       LD   HL,(CMPTR)       INC  HLCOMM3       LD   A,(HL)       CP   "*"       JR   Z,COMM1       CP   "."       JR   Z,COMM1       CP   "?"       JR   Z,COMM1       CP   " "       JR   Z,COMMD       CP   #0D       JR   Z,COMMD       INC  HL       JR   COMM3COMMD                   ; ветка удалния каталога       LD   C,#35       RST  #10       EXX       LD   BC,#0020       ADD  HL,BC       LD   DE,FPATT       LDIR       LD   DE,(FPATT+12)       LD   C,#21       RST  #10       RET  C       LD   HL,FPATT       LD   C,#34       RST  #10       RET  C       LD   C,#35       RST  #10       EXX       LD   BC,#000B       ADD  HL,BC       BIT  7,(HL)       LD   A,89         ; файл защищён от удаления       JR   NZ,EREXT       LD   DE,#0000       LD   C,#2D       RST  #10       RET  C       EXX       PUSH HL       LD   BC,#000B       ADD  HL,BC       ADD  HL,BC       LD   A,(HL)       ; смотрим 22-й байт описателя файла       POP  HL       OR   A       LD   A,83         ; попытка удаления не пустого каталога       JR   NZ,EREXT       ADD  HL,BC        ; становимся на FSTAT в 0-м блоке в кэше       RES  0,(HL)       EXX       RES  5,(HL)       LD   BC,#0005       ADD  HL,BC       LD   (HL),B       EXX       LD   C,#2E       RST  #10       RET  C       JR   EXDFEREXT       SCF       RETCOMM1       LD   HL,(FPATP)       LD   DE,FPATT       LD   BC,#000B       LDIRCOMM6  LD   DE,(FNUMP)   ; переход сюда, если в регистре состояния поднят 7 бит (загрузили имя файла)       INC  E       LD   (FNUMP),DE       LD   C,#27        ; читаем в кэш блок каталога, содержащий файловый дескриптор номер в E       RST  #10       JR   NC,COMM5       CP   #50       SCF       RET  NZ       JR   EXFCCOMM5       EXX               ; HL указывает на описатель файла в кэше       LD   DE,FPATT     ; DE - трафарет 11 байт       LD   C,#8F        ; сравнение 11 байт по адресам HL и DE       RST  #10       JR   NZ,COMM6     ; файл не подошёл, переходим к следующему                         ; файл подошёл - работа с файлом       LD   A,(FNUMP)       LD   C,#26        ; открываем файл по найденному номеру       RST  #10       RET  C       LD   C,#3C       RST  #10       RET  C       JR   COMM6EXDF       LD   C,#3C        ; собственно удаление       RST  #10       RET  CEXFC       LD   C,#02        ; сброс кэша на устройство       RST  #10       RET  CEXIT       XOR  A       LD   A,#F2       RET; процедура запроса нажатий клавишKEYWT       LD   C,#8       RST  #10       DEC  C       RST  #10       RET; процедура инициализации текста главного окна в буфереGNMWIN       LD   DE,GWTXT       LD   HL,MWINPTGNWIN       LD   A,(MWCOL)       LD   (GWIN+4),AGNWN1       LD   (PTPTR),HL       LD   A,(HL)       OR   A       JR   Z,GNWEX       LD   B,A       LD   HL,STLST-32       PUSH DE       LD   DE,32PTFL1       ADD  HL,DE       DJNZ PTFL1       POP  DE       LD   BC,32       LDIR       LD   HL,(PTPTR)       INC  HL       JR   GNWN1GNWEX       LD   A,#03       LD   (DE),A       RET; подпрограма вывода главного окнаGWPRT       LD   IX,GWIN       LD   A,1       LD   C,#61       RST  #10       LD   C,#66       RST  #10       RET; вывод подсвета кнопок главного окнаNWPRT       PUSH HL       LD   HL,#0510       JR   YNPRTYWPRT       PUSH HL       LD   HL,#060AYNPRT       LD   IX,YWIN       LD   (IX+#00),L       LD   (IX+#03),H       LD   HL,BTCOL       LD   A,1       LD   B,(HL)       POP  HL       LD   C,#63       RST  #10       LD   IX,GWIN       RET; вывод окошек с запросами удаления файловDPWPR       LD   HL,DPTIT       LD   A,(PWCOL)       JR   PRWPRFPWPR       LD   HL,FPTIT       LD   A,(PWCOL)       JR   PRWPRFAWPR       LD   HL,FATIT       LD   A,(AWCOL)PRWPR       LD   IX,PROTW       LD   (IX+4),A       LD   BC,TITLN       LD   DE,PRTIT       LDIR       LD   HL,(FDESCR)       LD   DE,PNAME       LD   C,#4F       RST  #10       EXX       LD   A,#22       LD   (DE),A       INC  DE       LD   BC,PNAME       LD   H,D       LD   L,E       PUSH HL       OR   A       SBC  HL,BC       LD   A,14       SUB  L       LD   B,0       LD   C,A       POP  HL       INC  DE       LD   (HL),#20       LDIR       LD   A,1       LD   C,#61       RST  #10       LD   C,#66       RST  #10       LD   IX,GWIN       RET; подпрограмма удаления защищённого файлаDLPFL       LD   HL,(FDFST)       BIT  7,(HL)       JR   Z,DLPF1       CALL FPWPRDLPF2       CALL KEYWT       CP   "y"       JR   Z,DLPF4       CP   "n"       JR   NZ,DLPF3       CALL GWPRT       JP   YWPRTDLPF3       CP   #10       JR   NZ,DLPF2       POP  BC       JP   CNCL1DLPF4       CALL GWPRT       CALL YWPRT       LD   HL,(FDFST)       RES  7,(HL)DLPF1       LD   C,#3C       RST  #10       RETKEY    DEFB #00          ; ключ в командной строкеMARKED DEFB #00          ; количество отмеченных файловCURMRK DEFB #01          ; текущий отмеченный файл? Надо посчитать от 1 до MARKEDASKFLG DEFB #00          ; флаг запроса на удаление (если отмечено несколько файлов)MINMAX DEFW #0000        ; минимальный и максимальный номера файлов в панелиFDESCR DEFW #0000        ; адрес файлового дескриптора открытого файла в системеFDFST  DEFW #0000ASDFL  DEFB #FF          ; флаг удаления подкаталоговCHDES  DEFW #0000BL0HL  DEFW #0000        ; указатель на 0-й блок удаляемого каталогаCRLVL  DEFW #0000        ; смещение уровня вложенностиFNLVL  DEFS 9            ; массив номеров файлов во вложенных каталогахPTBUF  DEFS 69           ; буфер для формирования пути с именем файла для печати в окнеPTBLN  EQU  $-PTBUFFPATT  DEFS 32           ; шаблон файла для удаления в режиме командной строкиFPATP  DEFW #0000CMPTR  DEFW #0000FNUMP  DEFW #0100; окна для подсветки кнопок главного окнаYWIN    DEFB 10        DEFB 12        DEFB 1        DEFB 6        DEFB %00101000        DEFB %00000001        DEFB 14        DEFB 7ASKTXT        DEFM "[ ] Запрос удаления [A]"ATXLEN  EQU  $-ASKTXTDFLTXT  DEFM "Удаление файла"DFLTLN  EQU  $-DFLTXTSELTX1  DEFM "Выбрано "SELT1L  EQU  $-SELTX1SELTX2  DEFM "файл(а,ов)"SELT2L  EQU  $-SELTX2; вектор окна Удалить файл? (Y/N)PROTW  DEFB 4       DEFB 12       DEFB 7       DEFB 24       DEFB %00010111       DEFB 1       DEFB 7       DEFB 29PRTIT  DEFM "╔══════ Файл защищён ═══════╗"       DEFB #0D       DEFM "║   Удалить "       DEFB #22          ; ="       DEFM "               ║"PNAME  EQU  $-16       DEFB #0D       DEFM "╟───────────────────────────╢"       DEFB #0D       DEFM "║ Да[Y] Нет[N] Отмена[SS+A] ║"       DEFB #0D       DEFM "╚═══════════════════════════╝"       DEFB #03FPTIT       DEFM "╔══════ Файл защищён ═══════╗"FPTLN  EQU  $-FPTITDPTIT       DEFM "╔═════ Каталог защищён ═════╗"TITLN  EQU  $-DPTITFATIT       DEFM "╔═════ Удаление файла ══════╗"FATLN  EQU  $-FATITSTLST        DEFM "╔═════════ Удаление ══════════╗"        DEFB #0D        DEFM "║                             ║"        DEFB #0D        DEFM "╟─────────────────────────────╢"        DEFB #0D        DEFM "║       [Enter] [SS+A]        ║"        DEFB #0D        DEFM "╚═════════════════════════════╝"        DEFB #0D        DEFM "║ Удаление каталога           ║"        DEFB #0D        DEFM "║ [X] Включая подкаталоги [S] ║"        DEFB #0DMWINPT        DEFB 1,2,2,2,3,4,5,0DWINPT        DEFB 1,6,2,2,3,7,3,4,5,0PTPTR   DEFW #0000DWIN    DEFB 3        DEFB 7        DEFB 11        DEFB 26        DEFB %00111000        DEFB %00000001        DEFB 6        DEFB 31GWIN    DEFB 3        DEFB 7        DEFB 9        DEFB 26        DEFB %00111000        DEFB %00000001        DEFB 6        DEFB 31GWTXT   DEFS 289DFLMS   EQU  GWTXT+34FNAME   EQU  GWTXT+66ASKFLCH EQU  GWTXT+99ASKTXMS EQU  GWTXT+98DNAME   EQU  GWTXT+66DNME1   EQU  GWTXT+98ASKSD   EQU  GWTXT+163